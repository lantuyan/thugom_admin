<div class="container custom-form" style="padding-left: 370px; padding-top:50px">
  <div class="row">
    <div class="col-lg-12">
      <div class="card">                   
        <div class="card-body">
          <form id="myForm" enctype="multipart/form-data" >
          <h1 style="text-align: center;padding-bottom:20px">Add Collector</h1>
              <div class="row mb-3">
                <label for="nameInput" class="col-sm-3 col-form-label">Name:</label>
                <div class="col-sm-9">
                  <input type="text" class="form-control" id="nameInput" value="{{this.name}}" placeholder="Name" name="name">
                </div>
              </div>
              <div class="row mb-3">
                <label for="emailInput" class="col-sm-3 col-form-label">Email:<span style="color: red">*</span></label>
                <div class="col-sm-9">
                  <input type="email" class="form-control" id="emailInput" value="{{this.email}}" placeholder="example@email.com" name="email">
                </div>
              </div>
              <div id="alertMessage" class="alert alert-danger d-none" role="alert">
                 Please enter your email
              </div>
              <div id="alertMessage4" class="alert alert-danger d-none" role="alert">
                 Email is not in correct format
              </div>
              <div class="row mb-3">
                  <label for="passwordInput" class="col-sm-3 col-form-label">Password:<span style="color: red">*</span></label>
                  <div class="col-sm-9 input-group">
                      <input type="password" class="form-control" id="passwordInput" value="{{this.password}}" placeholder="" name="password">
                      <button class="btn btn-outline-secondary" type="button">
                          <i class="bi bi-eye" id="togglePassword" onclick="togglePassword()" ></i>
                      </button>
                  </div>
              </div>
              <div id="alertMessage2" class="alert alert-danger d-none" role="alert">
                 Please enter your Password
              </div>
              <div id="alertMessage3" class="alert alert-danger d-none" role="alert">
                Password must be between 8 and 24 characters long.
              </div>
              <div class="row mb-3">
                <label for="phoneInput" class="col-sm-3 col-form-label">Phone:</label>
                <div class="col-sm-9">
                  <input type="text" class="form-control" id="phoneInput" value="{{this.phonenumber}}" placeholder="Phone number" name="phonenumber">
        
                </div>
              </div>
              <div class="row mb-3">
                <label for="phoneInput" class="col-sm-3 col-form-label">Zalo:</label>
                <div class="col-sm-9">
                  <input type="text" class="form-control" id="zalonumberInput" value="{{this.zalonumber}}" placeholder="Zalo Number" name="zalonumber">

                </div>
              </div>

              <div class="row mb-3">
                <label for="bioInput" class="col-sm-3 col-form-label">Address:</label>
                <div class="col-sm-9">
                  <input type="text" class="form-control" id="addressInput" value="{{this.address}}" placeholder="" name="address">
                </div>
              </div>

              <div class="row mb-3">
                <label for="subroleSelect" class="col-sm-3 col-form-label">Subrole:</label>
                <div class="col-sm-9">
                  <select class="form-select" id="subroleSelect" name="subrole">
                    <option value="">Choose Subrole</option>
                    <option value="Urenco">Urenco</option>
                    <option value="Angency">Angency</option>
                  </select>
                </div>
              </div>
              <div id="successMessage" class="alert alert-success d-none" role="alert">
                  User added successfully!
              </div>
              
              <!-- New row for the submit button -->
              <div class="row">
                <div class="col-sm-10 offset-sm-2" style="padding-left:140px;"> <!-- Offset to center the button -->
                  <button class="btn btn-success" type="submit" onclick="validateForm()">Comfirm</button>
                  <a href="/users" class="btn btn-light">Cancel</a>
                </div>
              </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

  <!-- Bootstrap Bundle with Popper -->
<script>
  function togglePassword() {
      var x = document.getElementById("passwordInput");
      if (x.type === "password") {
          x.type = "text";
      } else {
          x.type = "password";
      }
  }
  function validateForm() {
    // Ngăn chặn hành động mặc định của sự kiện submit
    var name = document.getElementById("nameInput").value;
    var email = document.getElementById("emailInput").value;
    var password = document.getElementById("passwordInput").value;
    var phone = document.getElementById("phoneInput").value;
    var phonenumber = document.getElementById("phoneInput").value; // Thêm dòng này
    var zalonumber = document.getElementById("zalonumberInput").value; // Thêm dòng này
        document.getElementById("subroleSelect").addEventListener("change", function() {
      var selectedSubrole = document.getElementById("subroleSelect").value;
      this.subrole = selectedSubrole;
    });

    document.getElementById("nameInput").addEventListener("blur", function() {
      var nameInput = document.getElementById("nameInput");
      if (nameInput.value.trim() === "") {
        nameInput.value = ""; // Nếu trống, gán giá trị mặc định là rỗng
      }
    });

    document.getElementById("phoneInput").addEventListener("input", function() {
      // Loại bỏ tất cả các ký tự không phải số
      this.value = this.value.replace(/\D/g, '');
    });

    document.getElementById("zalonumberInput").addEventListener("input", function() {
      // Loại bỏ tất cả các ký tự không phải số
      this.value = this.value.replace(/\D/g, '');
    });


    if (email === "" && password === "") {
        // Nếu cả hai đều rỗng, hiển thị thông báo lỗi cho cả hai
        document.getElementById("alertMessage").classList.remove('d-none');
        document.getElementById("alertMessage2").classList.remove('d-none');
        event.preventDefault(); 
        return false;
    } else if (email === "") {
        // Nếu chỉ email rỗng, hiển thị thông báo lỗi cho email
        document.getElementById("alertMessage").classList.remove('d-none');
        event.preventDefault(); 
        return false;
    } else if (password === "") {
        // Nếu chỉ password rỗng, hiển thị thông báo lỗi cho password
        document.getElementById("alertMessage2").classList.remove('d-none');
        event.preventDefault(); 
        return false;
    } else {
        // Nếu cả hai không rỗng, ẩn các thông báo lỗi và tiếp tục với việc gửi biểu mẫu
        document.getElementById("alertMessage").classList.add('d-none');
        document.getElementById("alertMessage2").classList.add('d-none');
    }
    var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(email)) {
      // Nếu email không đúng định dạng, hiển thị thông báo lỗi
      document.getElementById("alertMessage4").classList.remove('d-none');
      event.preventDefault(); 
      return false;
    } else {
      // Nếu email hợp lệ, ẩn thông báo lỗi cho email
      document.getElementById("alertMessage4").classList.add('d-none');
    }

    document.getElementById("successMessage").classList.remove('d-none');
    document.getElementById("myForm").submit();
    // If all fields are filled and phone number is valid, you can proceed with form submission      
    }    
</script>